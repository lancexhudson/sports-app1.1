{"ast":null,"code":"var _jsxFileName = \"/Users/lance/Documents/git-workspace/sports-app1.1/src/components/PollCard.js\",\n  _s = $RefreshSig$();\n// src/components/PollCard.js\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PollCard = ({\n  polls\n}) => {\n  _s();\n  const [votes, setVotes] = useState({}); // { pollId: { optionId: count } }\n  const [showThanks, setShowThanks] = useState(null); // pollId\n\n  // Initialize votes from localStorage or default to 0\n  useEffect(() => {\n    const initialVotes = {};\n    polls.forEach(poll => {\n      const saved = localStorage.getItem(`poll-${poll.id}`);\n      if (saved) {\n        initialVotes[poll.id] = JSON.parse(saved);\n      } else {\n        initialVotes[poll.id] = poll.options.reduce((acc, opt) => ({\n          ...acc,\n          [opt.id]: 0\n        }), {});\n      }\n    });\n    setVotes(initialVotes);\n  }, [polls]);\n\n  // Save to localStorage whenever votes change\n  useEffect(() => {\n    Object.keys(votes).forEach(pollId => {\n      localStorage.setItem(`poll-${pollId}`, JSON.stringify(votes[pollId]));\n    });\n  }, [votes]);\n  const handleVote = (pollId, optionId) => {\n    const pollVotes = votes[pollId];\n    if (!pollVotes) return;\n\n    // Check if user already voted\n    const alreadyVoted = Object.values(pollVotes).some(count => count > 0);\n    if (alreadyVoted) return;\n\n    // Increment vote\n    setVotes(prev => ({\n      ...prev,\n      [pollId]: {\n        ...prev[pollId],\n        [optionId]: prev[pollId][optionId] + 1\n      }\n    }));\n\n    // Show thank you\n    setShowThanks(pollId);\n    setTimeout(() => setShowThanks(null), 2000);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"poll-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"poll-title\",\n      children: \"Fan Polls\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"polls-list\",\n      children: polls.map(poll => {\n        const pollVotes = votes[poll.id] || {};\n        const totalVotes = Object.values(pollVotes).reduce((a, b) => a + b, 0);\n        const safeTotal = totalVotes > 0 ? totalVotes : 1; // Prevent NaN\n        const userVotedOption = Object.keys(pollVotes).find(id => pollVotes[id] > 0);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"poll-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"poll-question\",\n            children: poll.question\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"poll-options\",\n            children: poll.options.map(opt => {\n              const count = pollVotes[opt.id] || 0;\n              const percentage = Math.round(count / safeTotal * 100);\n              const isUserVote = userVotedOption === opt.id;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `poll-option ${userVotedOption ? 'voted' : 'clickable'}`,\n                onClick: () => !userVotedOption && handleVote(poll.id, opt.id),\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"poll-label\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: opt.text\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 92,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"poll-pct\",\n                    children: [percentage, \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 93,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"poll-bar-bg\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"poll-bar\",\n                    style: {\n                      width: `${percentage}%`\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 96,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 23\n                }, this), isUserVote && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"your-vote\",\n                  children: \"Your vote\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 102,\n                  columnNumber: 25\n                }, this)]\n              }, opt.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"poll-total\",\n            children: [totalVotes, \" vote\", totalVotes !== 1 ? 's' : '']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this), showThanks === poll.id && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"thank-you-popup\",\n            children: \"Thank you for your vote!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 17\n          }, this)]\n        }, poll.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n};\n_s(PollCard, \"80phVDw/L/EKNDXFuhUmyRp81us=\");\n_c = PollCard;\nexport default PollCard;\nvar _c;\n$RefreshReg$(_c, \"PollCard\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","PollCard","polls","_s","votes","setVotes","showThanks","setShowThanks","initialVotes","forEach","poll","saved","localStorage","getItem","id","JSON","parse","options","reduce","acc","opt","Object","keys","pollId","setItem","stringify","handleVote","optionId","pollVotes","alreadyVoted","values","some","count","prev","setTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","totalVotes","a","b","safeTotal","userVotedOption","find","question","percentage","Math","round","isUserVote","onClick","text","style","width","_c","$RefreshReg$"],"sources":["/Users/lance/Documents/git-workspace/sports-app1.1/src/components/PollCard.js"],"sourcesContent":["// src/components/PollCard.js\nimport React, { useState, useEffect } from 'react';\n\nconst PollCard = ({ polls }) => {\n  const [votes, setVotes] = useState({}); // { pollId: { optionId: count } }\n  const [showThanks, setShowThanks] = useState(null); // pollId\n\n  // Initialize votes from localStorage or default to 0\n  useEffect(() => {\n    const initialVotes = {};\n    polls.forEach((poll) => {\n      const saved = localStorage.getItem(`poll-${poll.id}`);\n      if (saved) {\n        initialVotes[poll.id] = JSON.parse(saved);\n      } else {\n        initialVotes[poll.id] = poll.options.reduce(\n          (acc, opt) => ({\n            ...acc,\n            [opt.id]: 0,\n          }),\n          {}\n        );\n      }\n    });\n    setVotes(initialVotes);\n  }, [polls]);\n\n  // Save to localStorage whenever votes change\n  useEffect(() => {\n    Object.keys(votes).forEach((pollId) => {\n      localStorage.setItem(`poll-${pollId}`, JSON.stringify(votes[pollId]));\n    });\n  }, [votes]);\n\n  const handleVote = (pollId, optionId) => {\n    const pollVotes = votes[pollId];\n    if (!pollVotes) return;\n\n    // Check if user already voted\n    const alreadyVoted = Object.values(pollVotes).some((count) => count > 0);\n    if (alreadyVoted) return;\n\n    // Increment vote\n    setVotes((prev) => ({\n      ...prev,\n      [pollId]: {\n        ...prev[pollId],\n        [optionId]: prev[pollId][optionId] + 1,\n      },\n    }));\n\n    // Show thank you\n    setShowThanks(pollId);\n    setTimeout(() => setShowThanks(null), 2000);\n  };\n\n  return (\n    <div className=\"poll-card\">\n      <h3 className=\"poll-title\">Fan Polls</h3>\n      <div className=\"polls-list\">\n        {polls.map((poll) => {\n          const pollVotes = votes[poll.id] || {};\n          const totalVotes = Object.values(pollVotes).reduce(\n            (a, b) => a + b,\n            0\n          );\n          const safeTotal = totalVotes > 0 ? totalVotes : 1; // Prevent NaN\n          const userVotedOption = Object.keys(pollVotes).find(\n            (id) => pollVotes[id] > 0\n          );\n\n          return (\n            <div key={poll.id} className=\"poll-item\">\n              <h4 className=\"poll-question\">{poll.question}</h4>\n              <div className=\"poll-options\">\n                {poll.options.map((opt) => {\n                  const count = pollVotes[opt.id] || 0;\n                  const percentage = Math.round((count / safeTotal) * 100);\n                  const isUserVote = userVotedOption === opt.id;\n\n                  return (\n                    <div\n                      key={opt.id}\n                      className={`poll-option ${\n                        userVotedOption ? 'voted' : 'clickable'\n                      }`}\n                      onClick={() =>\n                        !userVotedOption && handleVote(poll.id, opt.id)\n                      }\n                    >\n                      <div className=\"poll-label\">\n                        <span>{opt.text}</span>\n                        <span className=\"poll-pct\">{percentage}%</span>\n                      </div>\n                      <div className=\"poll-bar-bg\">\n                        <div\n                          className=\"poll-bar\"\n                          style={{ width: `${percentage}%` }}\n                        />\n                      </div>\n                      {isUserVote && (\n                        <span className=\"your-vote\">Your vote</span>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n              <div className=\"poll-total\">\n                {totalVotes} vote{totalVotes !== 1 ? 's' : ''}\n              </div>\n\n              {/* Thank You Popup */}\n              {showThanks === poll.id && (\n                <div className=\"thank-you-popup\">Thank you for your vote!</div>\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport default PollCard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}